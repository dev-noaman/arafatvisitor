import{j as e,b as S,t as C,o as k,s as b,l as E,r as n,e as L,_ as F,c as w,u as M}from"./index-B5L_DzKs.js";const A=s=>({ADMIN:"Administrator",RECEPTION:"Reception Staff",HOST:"Host"})[s]||s,z=s=>({ADMIN:"bg-red-100 text-red-800",RECEPTION:"bg-blue-100 text-blue-800",HOST:"bg-green-100 text-green-800"})[s]||"bg-gray-100 text-gray-800",I=s=>!s||s==="ACTIVE"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800";function B({user:s,isLoading:r}){return r?e.jsx("div",{className:"bg-white rounded-lg shadow p-6 animate-pulse",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-300 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-6 bg-gray-300 rounded w-32 mb-2"}),e.jsx("div",{className:"h-4 bg-gray-300 rounded w-48"})]})]})}):e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-400 to-blue-600 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-2xl font-bold text-white",children:s.name?s.name[0].toUpperCase():s.email[0].toUpperCase()})})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:s.name||"N/A"}),e.jsx("p",{className:"text-gray-600 text-sm",children:s.email})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${z(s.role)}`,children:A(s.role)}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${I(s.status)}`,children:!s.status||s.status==="ACTIVE"?"Active":"Inactive"})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-2 sm:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Member Since"}),e.jsx("p",{className:"text-gray-900 font-medium",children:new Date(s.createdAt).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Last Updated"}),e.jsx("p",{className:"text-gray-900 font-medium",children:new Date(s.updatedAt).toLocaleDateString()})]})]})]})]})})}const T=k({name:b().min(2,"Name must be at least 2 characters").max(100,"Name must be less than 100 characters"),phone:b().optional().or(E(""))});function U({user:s,onSubmit:r,isLoading:t}){var l,u;const{register:i,handleSubmit:p,formState:{errors:o,isDirty:x}}=S({resolver:C(T),defaultValues:{name:s.name||"",phone:""}});return e.jsxs("form",{onSubmit:p(r),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name *"}),e.jsx("input",{...i("name"),type:"text",id:"name",placeholder:"Enter your full name",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:t}),o.name&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:String((l=o.name)==null?void 0:l.message)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),e.jsx("input",{type:"email",id:"email",value:s.email,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-600 cursor-not-allowed"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Email cannot be changed"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),e.jsx("input",{...i("phone"),type:"tel",id:"phone",placeholder:"Enter your phone number (optional)",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:t}),o.phone&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:String((u=o.phone)==null?void 0:u.message)})]}),e.jsx("div",{className:"flex gap-3",children:e.jsx("button",{type:"submit",disabled:t||!x,className:"px-4 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition",children:t?"Saving...":"Save Changes"})})]})}const W=k({oldPassword:b().min(1,"Current password is required"),newPassword:b().min(8,"Password must be at least 8 characters"),confirmPassword:b()}).refine(s=>s.newPassword===s.confirmPassword,{message:"Passwords do not match",path:["confirmPassword"]});function R({onSubmit:s,isLoading:r}){const[t,i]=n.useState(!1),[p,o]=n.useState(!1),[x,l]=n.useState(!1),{register:u,handleSubmit:f,formState:{errors:a},reset:N}=S({resolver:C(W),defaultValues:{oldPassword:"",newPassword:"",confirmPassword:""}}),h=async m=>{await s(m),N()},g=(m,j,y,P)=>{var v;return e.jsxs("div",{children:[e.jsxs("label",{htmlFor:m,className:"block text-sm font-medium text-gray-700 mb-2",children:[j," *"]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{...u(m),type:y?"text":"password",id:m,placeholder:`Enter ${j.toLowerCase()}`,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 pr-10",disabled:r}),e.jsx("button",{type:"button",onClick:()=>P(!y),className:"absolute right-3 top-2.5 text-gray-500 hover:text-gray-700 transition",tabIndex:-1,children:y?e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-4.803c1.079-1.35 2.587-2.417 4.236-2.957"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.879 7.519c1.171-1.025 2.56-1.52 4.121-1.52 3.773 0 6.867 3.06 6.867 6.84 0 1.329-.196 2.605-.57 3.824m2.568-9.64A9 9 0 0121 12a9 9 0 01-9 9m0 0a9 9 0 01-9-9 9 9 0 019-9"})]}):e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),a[m]&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:(v=a[m])==null?void 0:v.message})]})};return e.jsxs("form",{onSubmit:f(h),className:"space-y-6",children:[e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("span",{className:"font-medium",children:"Security Note:"})," Passwords must be at least 8 characters long. New and confirm password fields must match."]})}),g("oldPassword","Current Password",t,i),g("newPassword","New Password",p,o),g("confirmPassword","Confirm New Password",x,l),e.jsx("div",{className:"flex gap-3 pt-2",children:e.jsx("button",{type:"submit",disabled:r,className:"px-4 py-2 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition",children:r?"Changing Password...":"Change Password"})})]})}k({theme:F(["light","dark","auto"]).optional(),language:b().optional(),notificationsEnabled:L().optional()});function $({initialData:s,onSubmit:r,isLoading:t}){const[i,p]=n.useState((s==null?void 0:s.theme)||"auto"),[o,x]=n.useState((s==null?void 0:s.language)||"en"),[l,u]=n.useState((s==null?void 0:s.notificationsEnabled)!==!1),f=async a=>{a.preventDefault(),await r({theme:i,language:o,notificationsEnabled:l})};return e.jsxs("form",{onSubmit:f,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Theme Preference"}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:["light","dark","auto"].map(a=>e.jsx("button",{type:"button",onClick:()=>p(a),disabled:t,className:`p-4 rounded-lg border-2 transition ${i===a?"border-blue-600 bg-blue-50":"border-gray-300 hover:border-gray-400"} disabled:opacity-50 disabled:cursor-not-allowed`,children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[a==="light"&&e.jsx("svg",{className:"w-6 h-6 text-yellow-500",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 18a6 6 0 100-12 6 6 0 000 12zM12 2v3m0 14v3M4.22 4.22l2.12 2.12m9.32 9.32l2.12 2.12M2 12h3m14 0h3M4.22 19.78l2.12-2.12m9.32-9.32l2.12-2.12"})}),a==="dark"&&e.jsx("svg",{className:"w-6 h-6 text-gray-700",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"})}),a==="auto"&&e.jsx("svg",{className:"w-6 h-6 text-gray-600",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"})}),e.jsx("span",{className:"text-xs font-medium capitalize",children:a})]})},a))})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"language",className:"block text-sm font-medium text-gray-700 mb-2",children:"Language"}),e.jsxs("select",{value:o,onChange:a=>x(a.target.value),disabled:t,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"en",children:"English"}),e.jsx("option",{value:"ar",children:"العربية (Arabic)"}),e.jsx("option",{value:"fr",children:"Français (French)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Notifications"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:l,onChange:a=>u(a.target.checked),disabled:t,className:"w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500 cursor-pointer"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Enable system notifications"})]}),e.jsx("p",{className:"text-xs text-gray-600 ml-7",children:"Receive notifications for important updates and events"})]})]}),e.jsx("div",{className:"flex gap-3 pt-2",children:e.jsx("button",{type:"submit",disabled:t,className:"px-4 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition",children:t?"Saving...":"Save Preferences"})})]})}const V=async()=>await w.get("/admin/api/profile"),H=async s=>await w.put("/admin/api/profile",s),_=async s=>await w.post("/admin/api/profile/change-password",{oldPassword:s.oldPassword,newPassword:s.newPassword}),q=async()=>await w.get("/admin/api/profile/preferences"),G=async s=>await w.put("/admin/api/profile/preferences",s);function K(){const{success:s,error:r}=M(),[t,i]=n.useState(null),[p,o]=n.useState(null),[x,l]=n.useState(!1),[u,f]=n.useState(!1),[a,N]=n.useState(!1),[h,g]=n.useState("profile"),m=n.useCallback(async()=>{l(!0);try{const c=await V();i(c)}catch(c){r(c instanceof Error?c.message:"Failed to load profile")}finally{l(!1)}},[r]),j=n.useCallback(async()=>{try{const c=await q();o(c)}catch{o({theme:"auto",language:"en",notificationsEnabled:!0})}},[]);n.useEffect(()=>{m(),j()},[m,j]);const y=async c=>{l(!0);try{const d=await H(c);i(d),s("Profile updated successfully")}catch(d){r(d instanceof Error?d.message:"Failed to update profile")}finally{l(!1)}},P=async c=>{f(!0);try{await _(c),s("Password changed successfully")}catch(d){r(d instanceof Error?d.message:"Failed to change password")}finally{f(!1)}},v=async c=>{N(!0);try{const d=await G(c);o(d),s("Preferences saved successfully")}catch(d){r(d instanceof Error?d.message:"Failed to save preferences")}finally{N(!1)}};return x&&!t?e.jsx("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-6 lg:p-8",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"animate-pulse space-y-6",children:[e.jsx("div",{className:"h-12 bg-gray-300 rounded w-1/3"}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6 h-32"}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6 h-96"})]})})}):t?e.jsx("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-6 lg:p-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Profile Settings"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Manage your account settings and preferences"})]}),e.jsx(B,{user:t,isLoading:x}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsxs("div",{className:"border-b border-gray-200 flex gap-0",children:[e.jsx("button",{onClick:()=>g("profile"),className:`flex-1 py-4 px-6 font-medium text-center transition ${h==="profile"?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 hover:text-gray-900"}`,children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Profile Information"]})}),e.jsx("button",{onClick:()=>g("password"),className:`flex-1 py-4 px-6 font-medium text-center transition ${h==="password"?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 hover:text-gray-900"}`,children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),"Security"]})}),e.jsx("button",{onClick:()=>g("preferences"),className:`flex-1 py-4 px-6 font-medium text-center transition ${h==="preferences"?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 hover:text-gray-900"}`,children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Preferences"]})})]}),e.jsxs("div",{className:"p-6 sm:p-8",children:[h==="profile"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Basic Information"}),e.jsx("p",{className:"text-gray-600 text-sm mb-6",children:"Update your name and contact information"})]}),e.jsx(U,{user:t,onSubmit:y,isLoading:x})]}),h==="password"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Change Password"}),e.jsx("p",{className:"text-gray-600 text-sm mb-6",children:"Update your password to keep your account secure"})]}),e.jsx(R,{onSubmit:P,isLoading:u})]}),h==="preferences"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Preferences"}),e.jsx("p",{className:"text-gray-600 text-sm mb-6",children:"Customize your experience and notification settings"})]}),e.jsx($,{initialData:p||void 0,onSubmit:v,isLoading:a})]})]})]})]})}):e.jsx("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-6 lg:p-8",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsx("p",{className:"text-red-800",children:"Failed to load profile. Please try refreshing the page."})})})})}export{K as default};
