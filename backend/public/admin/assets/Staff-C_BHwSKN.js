import{b as g,u as R,r as a,j as n}from"./index-CE4p4Fi9.js";import"./HostForm-xCkPM3VF.js";import{H as T,a as q,D as Q}from"./DeleteConfirmationDialog-B25UCuuq.js";import{E as A}from"./ErrorState-D_uK2wo6.js";const U=async e=>{const t=new URLSearchParams;e!=null&&e.page&&t.append("page",e.page.toString()),e!=null&&e.limit&&t.append("limit",e.limit.toString()),e!=null&&e.search&&t.append("search",e.search),e!=null&&e.sortBy&&t.append("sortBy",e.sortBy),e!=null&&e.sortOrder&&t.append("sortOrder",e.sortOrder);const r=t.toString(),S=`/admin/api/staff${r?`?${r}`:""}`;return await g.get(S)},W=async e=>await g.post("/admin/api/staff",e),z=async(e,t)=>await g.put(`/admin/api/staff/${e}`,t),G=async e=>await g.delete(`/admin/api/staff/${e}`);function Y(){const{success:e,error:t}=R(),[r,S]=a.useState([]),[h,x]=a.useState(!1),[m,j]=a.useState(null),[v,f]=a.useState(!1),[c,d]=a.useState(),[L,y]=a.useState(!1),[p,b]=a.useState(),[M,w]=a.useState(!1),[E,D]=a.useState(!1),[i,O]=a.useState({page:1,limit:10,total:0,totalPages:1}),[u,k]=a.useState(""),o=a.useCallback(async(s=1,C="")=>{x(!0),j(null);try{const l=await U({page:s,limit:i.limit,search:C});S(l.data||[]),O({page:l.page||1,limit:l.limit||10,total:l.total||0,totalPages:l.totalPages||1})}catch{j("Failed to load staff members. Please check your connection and try again."),t("Failed to load staff")}finally{x(!1)}},[i.limit,t]);a.useEffect(()=>{o(1,"")},[o]);const P=s=>{k(s),o(1,s)},F=s=>{o(s,u)},N=async s=>{D(!0);try{c?(await z(c.id,s),e("Staff member updated successfully")):(await W(s),e("Staff member created successfully")),f(!1),d(void 0),await o(i.page,u)}catch{t(c?"Failed to update staff member":"Failed to create staff member")}finally{D(!1)}},I=async()=>{if(p){w(!0);try{await G(p.id),e("Staff member deleted successfully"),y(!1),b(void 0),await o(i.page,u)}catch{t("Failed to delete staff member")}finally{w(!1)}}},B=s=>{d(s),f(!0)},H=s=>{b(s),y(!0)},$=()=>{f(!1),d(void 0)};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Staff Management"}),n.jsx("p",{className:"text-gray-600 mt-1",children:"Manage internal staff members"})]}),n.jsx("button",{onClick:()=>{d(void 0),f(!0)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition",children:n.jsxs("span",{className:"inline-flex items-center gap-2",children:[n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Staff"]})})]}),m&&!h&&n.jsx(A,{title:"Failed to load staff",message:m,onRetry:()=>o(i.page,u)}),!m&&n.jsx(T,{hosts:r,isLoading:h,pagination:i,onSearch:P,onPageChange:F,onEdit:B,onDelete:H,entityLabel:"staff",hideCompany:!0}),n.jsx(q,{isOpen:v,onClose:$,onSubmit:N,hostData:c,isLoading:E,entityLabel:"Staff",hideCompany:!0}),n.jsx(Q,{isOpen:L,host:p,onConfirm:I,onCancel:()=>{y(!1),b(void 0)},isLoading:M,entityLabel:"Staff"})]})}export{Y as default};
