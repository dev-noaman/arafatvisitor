import{b as h,u as P,r as n,j as t}from"./index-DTPnUPt8.js";import{H as k,a as F}from"./HostModal-DY0tcRZ9.js";import{E as H}from"./ErrorState-CQl4SKkB.js";const I=async e=>{const a=new URLSearchParams;e!=null&&e.page&&a.append("page",e.page.toString()),e!=null&&e.limit&&a.append("limit",e.limit.toString()),e!=null&&e.search&&a.append("search",e.search),(e==null?void 0:e.status)!==void 0&&a.append("status",e.status.toString());const r=a.toString(),u=`/admin/api/my-team${r?`?${r}`:""}`;return await h.get(u)},O=async e=>await h.post("/admin/api/my-team",e),R=async(e,a)=>await h.patch(`/admin/api/my-team/${e}`,a);function Q(){const{success:e,error:a}=P(),[r,u]=n.useState([]),[y,f]=n.useState(!1),[p,x]=n.useState(null),[v,l]=n.useState(!1),[g,b]=n.useState(),[M,S]=n.useState(!1),[c,w]=n.useState({page:1,limit:10,total:0,totalPages:1}),[d,E]=n.useState(""),i=n.useCallback(async(s=1,m="")=>{f(!0),x(null);try{const o=await I({page:s,limit:c.limit,search:m});u(o.data||[]),w({page:o.page,limit:o.limit,total:o.total,totalPages:o.totalPages})}catch(o){x(o instanceof Error?o.message:"Failed to load team members")}finally{f(!1)}},[c.limit]);n.useEffect(()=>{i(1,"")},[]);const L=async s=>{S(!0);try{g?(await R(String(g.id),s),e("Team member updated successfully")):(await O(s),e("Team member created successfully")),l(!1),b(void 0),i(c.page,d)}catch(m){a(m instanceof Error?m.message:"Failed to save team member")}finally{S(!1)}},N=s=>{b(s),l(!0)},j=s=>{E(s),i(1,s)},T=s=>{i(s,d)},C=()=>{l(!1),b(void 0)};return t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[t.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"My Team"}),t.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Manage your company's team members"})]}),t.jsxs("button",{onClick:()=>l(!0),className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:[t.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8-4-4 4 4 4 4 4-4m6 6 6-6 6z"})}),"Add Team Member"]})]})}),t.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:t.jsx("input",{type:"text",placeholder:"Search by name, email, or phone...",value:d,onChange:s=>j(s.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})}),y?t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):p?t.jsx(H,{message:p,onRetry:()=>i(1,d)}):t.jsx(k,{hosts:r,isLoading:!1,pagination:c,onSearch:j,onPageChange:T,onEdit:N,onDelete:()=>{},entityLabel:"team member",hideCompany:!0}),t.jsx(F,{isOpen:v,onClose:C,onSubmit:L,hostData:g,isLoading:M,entityLabel:"team member",hideCompany:!0})]})}export{Q as default};
